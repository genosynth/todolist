(()=>{"use strict";function e(e,t,n,d,l,o=!1){return{title:e,describtion:t,notes:n,priority:d,dueDate:l,status:o}}function t(e,t=[]){return{name:e,todos:t}}let n=[new t("Default")];function d(e){document.getElementById("header").innerText=e;let t=document.getElementById("tasks");t.innerHTML=" <tr><th>Task</th><th>Describtion</th><th>Notes</th><th>Priority</th><th>Status</th><th>Due Date</th></tr>";for(let l=0;l<n.length;l++)if(n[l].name==e)for(let o=0;o<n[l].todos.length;o++){let i=document.createElement("tr"),a=document.createElement("td");a.innerText=n[l].todos[o].title;let c=document.createElement("td");c.innerText=n[l].todos[o].describtion;let r=document.createElement("td");r.innerText=n[l].todos[o].notes;let m=document.createElement("td");m.id=`priority${o}`,m.innerText=n[l].todos[o].priority;let u=document.createElement("button");u.innerText="Edit",u.addEventListener("click",(function(){u.style.visibility="hidden",document.getElementById(`status${o}`).innerHTML=`<select id="selectStatus${o}">\n               <option value="Pending">Pending</option>\n               <option value="Done">Done</option>               \n               </select>`,document.getElementById(`priority${o}`).innerHTML=`<select id="selectPriority${o}">\n               <option value="High">High</option>\n               <option value="Medium">Medium</option> \n               <option value="Low">Low</option>              \n               </select>`,document.getElementById(`date${o}`).innerHTML=`<input type="date" id="newduedate${o}" name="duedate" placeholder="duedate">`;let t=document.createElement("button");t.innerText="Apply Changes",t.addEventListener("click",(function(){let t=document.getElementById(`selectStatus${o}`).value,i=document.getElementById(`newduedate${o}`).value,a=document.getElementById(`selectPriority${o}`).value;console.log(t),"Done"==t&&(n[l].todos[o].status=!0),"Pending"==t&&(n[l].todos[o].status=!1),n[l].todos[o].dueDate=i,n[l].todos[o].priority=a,window.localStorage.setItem("projects",JSON.stringify(n)),d(e)})),i.appendChild(t)}));let s=document.createElement("button");s.innerText="Delete",s.addEventListener("click",(function(){window.confirm("Are you sure you want to delete this task?")&&(n[l].todos.splice(o,1),localStorage.setItem("projects",JSON.stringify(n)),d(e))}));let p=document.createElement("td");p.id=`status${o}`,0==n[l].todos[o].status&&(p.innerText="Pending"),1==n[l].todos[o].status&&(p.innerText="Done");let h=document.createElement("td");h.id=`date${o}`,h.innerText=n[l].todos[o].dueDate,i.appendChild(a),i.appendChild(c),i.appendChild(r),i.appendChild(m),i.appendChild(p),i.appendChild(h),i.appendChild(u),i.appendChild(s),t.appendChild(i)}l();let o=document.getElementById("delete-project");"Default"!=document.getElementById("header").innerText&&"Default"!=e&&o.addEventListener("click",(()=>{!function(e){if("Default"==e)return;let t=[];n.filter((n=>{n.name!==e&&t.push(n)})),window.localStorage.setItem("projects",JSON.stringify(t)),location.reload()}(document.getElementById("header").innerText)}))}function l(){document.getElementById("add-task").addEventListener("click",(function(){document.getElementById("add-task").style="visibility:hidden",document.getElementById("task-content").innerHTML='<form style="padding: 2%" action="">\n      <label for="fname">Task name:</label>\n      <input type="text" id="tname" name="tname" placeholder="name" required>\n      <label for="lname">Describtion:</label>\n      <input type="text" id="describtion" name="describtion" placeholder="describtion">\n      <label for="lname">Notes:</label>\n      <input type="text" id="notes" name="notes" placeholder="notes">\n      <label for="lname">Priority:</label>\n      <select id="priority">\n               <option value="High">High</option>\n               <option value="Medium">Medium</option> \n               <option value="Low">Low</option>              \n      </select>\n      <label for="lname">Due Date:</label>\n      <input type="date" id="duedate" name="duedate" placeholder="duedate">\n     \n    </form>';let e=document.createElement("button");e.innerText="Add Task",e.addEventListener("click",o),document.getElementById("task-content").appendChild(e)}))}function o(){let t=document.getElementById("header").innerText,l=document.getElementById("tname").value,o=new e(l,document.getElementById("describtion").value,document.getElementById("notes").value,document.getElementById("priority").value,document.getElementById("duedate").value);if(""!=l){for(let e=0;e<n.length;e++)n[e].name==t&&n[e].todos.push(o);window.localStorage.setItem("projects",JSON.stringify(n)),console.log(o),console.log(n),document.getElementById("task-content").innerHTML="",document.getElementById("add-task").style="visibility:visible",d(t)}else alert("Name of task cannot be left blank")}function i(e){let t=document.getElementById("content");t.innerHTML="";let n=document.createElement("h1");n.id="header",n.innerText=e;let o=document.createElement("table");o.className="taskTable",o.id="tasks";let i=document.createElement("tr"),a=document.createElement("th");a.innerText="Task";let c=document.createElement("th");c.innerText="Describtion";let r=document.createElement("th");r.innerText="Notes";let m=document.createElement("th");m.innerText="Priority";let u=document.createElement("th");u.innerText="Checklist";let s=document.createElement("th");s.innerText="Due Date";let p=document.createElement("span");p.className="content-span",p.id="add-task",p.innerText="Add Task";let h=document.createElement("div");h.id="task-content",t.appendChild(n),t.appendChild(o),o.appendChild(i),i.appendChild(a),i.appendChild(c),i.appendChild(r),i.appendChild(m),i.appendChild(u),i.appendChild(s),t.appendChild(p);let E=document.createElement("span");E.className="content-span",E.id="delete-project",E.innerText="Delete Project",t.appendChild(E),t.appendChild(h),l(),d(e)}JSON.parse(window.localStorage.getItem("projects"))&&(n=JSON.parse(window.localStorage.getItem("projects"))),function(){if(n.length>1)for(let e=1;e<n.length;e++){let t=document.createElement("li");t.id=n[e].name,t.className="projects";let l=t.id;t.addEventListener("click",i(l)),t.innerText=l,document.getElementById("list-sidebar").appendChild(t),document.getElementById(t.id).addEventListener("click",(function(){d(l)}))}}(),d("Default"),document.getElementById("newProject").addEventListener("click",(function(){document.getElementById("content").innerHTML='<h1>New Project</h1>\n     \n      <label for="pname">Project Name:</label>\n      <input type="text" id="pname" name="pname" placeholder="Name" required>';let e=document.createElement("button");e.innerText="Add Project",e.addEventListener("click",(function(){for(let e=0;e<n.length;e++){if(""==document.getElementById("pname").value)return window.alert("Project name cannot be left empty!");if(document.getElementById("pname").value==n[e].name)return window.alert("Project with same name already exists"),void i(n[e].name)}let e=new t(document.getElementById("pname").value);n.push(e),window.localStorage.setItem("projects",JSON.stringify(n)),console.log(n);let l=document.createElement("li");l.id=document.getElementById("pname").value,l.className="projects";let o=l.id;l.addEventListener("click",i(o)),l.innerText=e.name,document.getElementById("list-sidebar").appendChild(l),document.getElementById(l.id).addEventListener("click",(function(){d(o)}))})),document.getElementById("content").appendChild(e)})),document.getElementById("default-project").addEventListener("click",(function(){d("Default")}))})();